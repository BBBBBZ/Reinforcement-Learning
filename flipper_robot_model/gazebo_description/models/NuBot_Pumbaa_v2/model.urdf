<?xml version="1.0" encoding="utf-8"?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from model_v2.urdf.xacro            | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="NuBot_Pumbaa_v2">
  <link name="base_link"/>
  <joint name="base_link_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="chassis_link"/>
  </joint>
  <!--chassis_link-->
  <link name="chassis_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="20"/>
      <inertia ixx="0.203664" ixy="0" ixz="0" iyy="0.136197" iyz="0" izz="0.319921"/>
    </inertial>
    <collision name="base_collision_1">
      <origin rpy="1.57079632679 0 0" xyz="0.276 0 0"/>
      <geometry>
        <cylinder length="0.10" radius="0.07"/>
      </geometry>
    </collision>
    <collision name="base_collision_2">
      <origin rpy="1.57079632679 0 0" xyz="-0.276 0 0"/>
      <geometry>
        <cylinder length="0.10" radius="0.07"/>
      </geometry>
    </collision>
    <collision name="base_collision">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.552 0.10 0.14"/>
      </geometry>
    </collision>
    <visual name="base_visual">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="model://NuBot_Pumbaa_v2/meshes/base_link.STL"/>
      </geometry>
    </visual>
    <visual name="base_vive_link_visual">
      <origin rpy="0 0 0" xyz="0.16175 0 0.138"/>
      <geometry>
        <mesh filename="model://NuBot_Pumbaa_v2/meshes/vive_link.STL"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="chassis_link">
    <selfCollide>false</selfCollide>
    <mu1>1</mu1>
    <mu2>1</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
    <fdir1 value="0 1 0"/>
    <gravity>1</gravity>
    <maxContacts>2</maxContacts>
  </gazebo>
  <!--left_track-->
  <link name="left_track_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="10"/>
      <inertia ixx="0.15" ixy="0" ixz="0" iyy="0.9" iyz="0" izz="0.9"/>
    </inertial>
    <visual name="left_track_visual">
      <origin rpy="0 0 0" xyz="0 -0.145 0"/>
      <geometry>
        <mesh filename="model://NuBot_Pumbaa_v2/meshes/left_track_link.STL"/>
      </geometry>
    </visual>
    <collision name="left_track_collision_1">
      <origin rpy="1.57079632679 0 0" xyz="0.276 0 0"/>
      <geometry>
        <cylinder length="0.18" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="left_track_collision_2">
      <origin rpy="1.57079632679 0 0" xyz="-0.276 0 0"/>
      <geometry>
        <cylinder length="0.18" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="left_track_collision">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.552 0.18 0.18"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="left_track_link">
    <selfCollide>false</selfCollide>
    <mu1>0.7</mu1>
    <mu2>150</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
    <fdir1 value="0 1 0"/>
    <gravity>1</gravity>
    <maxContacts>2</maxContacts>
  </gazebo>
  <!--left_track joints-->
  <joint name="left_track_joint" type="revolute">
    <!-- fixed -->
    <origin rpy="0 0 0" xyz="0 0.145 0"/>
    <child link="left_track_link"/>
    <parent link="chassis_link"/>
    <limit effort="10000" lower="-1e-16" upper="1e-16" velocity="10000"/>
    <axis xyz="0 0 0"/>
    <dynamics damping="10000" friction="10000"/>
  </joint>
  <!--right_track-->
  <link name="right_track_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <mass value="10"/>
      <inertia ixx="0.15" ixy="0" ixz="0" iyy="0.9" iyz="0" izz="0.9"/>
    </inertial>
    <visual name="right_track_visual">
      <origin rpy="0 0 0" xyz="0 0.145 0"/>
      <geometry>
        <mesh filename="model://NuBot_Pumbaa_v2/meshes/right_track_link.STL"/>
      </geometry>
    </visual>
    <collision name="right_track_collision_1">
      <origin rpy="1.57079632679 0 0" xyz="0.276 0 0"/>
      <geometry>
        <cylinder length="0.18" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="right_track_collision_2">
      <origin rpy="1.57079632679 0 0" xyz="-0.276 0 0"/>
      <geometry>
        <cylinder length="0.18" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="right_track_collision">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.552 0.18 0.18"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="right_track_link">
    <selfCollide>false</selfCollide>
    <mu1>0.7</mu1>
    <mu2>150</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
    <fdir1 value="0 1 0"/>
    <gravity>1</gravity>
    <maxContacts>2</maxContacts>
  </gazebo>
  <!--right_track joints-->
  <joint name="right_track_joint" type="revolute">
    <!-- fixed -->
    <origin rpy="0 0 0" xyz="0 -0.145 0"/>
    <parent link="chassis_link"/>
    <child link="right_track_link"/>
    <limit effort="10000" lower="-1e-16" upper="1e-16" velocity="10000"/>
    <axis xyz="0 0 0"/>
    <dynamics damping="10000" friction="10000"/>
  </joint>
  <!--rear_left_flipper-->
  <link name="rear_left_flipper_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.168 0 0"/>
      <mass value="2.5"/>
      <inertia ixx="0.0025" ixy="0" ixz="0" iyy="0.022" iyz="0" izz="0.02"/>
    </inertial>
    <visual name="rear_left_flipper_visual">
      <origin rpy="0 0 0" xyz="0 -0.016 0"/>
      <geometry>
        <mesh filename="model://NuBot_Pumbaa_v2/meshes/back_left_fin_link.STL"/>
      </geometry>
    </visual>
    <collision name="rear_left_flipper_collision_large_wheel_collision">
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.038" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="rear_left_flipper_collision_small_wheel_collision">
      <origin rpy="1.57079632679 0 0" xyz="-0.336 0 0"/>
      <geometry>
        <cylinder length="0.038" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="rear_left_flipper_collision_middle_bar_collision">
      <origin rpy="0 0 0" xyz="-0.168 0 0"/>
      <geometry>
        <box size="0.336 0.038 0.18"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="rear_left_flipper_link">
    <selfCollide>false</selfCollide>
    <mu1>0.7</mu1>
    <mu2>150</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
    <fdir1 value="0 1 0"/>
    <gravity>1</gravity>
    <maxContacts>2</maxContacts>
  </gazebo>
  <joint name="rear_left_flipper_joint" type="revolute">
    <origin rpy="0 0 0" xyz="-0.276 0.266 0"/>
    <child link="rear_left_flipper_link"/>
    <parent link="chassis_link"/>
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-3" upper="3" velocity="0.3"/>
  </joint>
  <!--rear_right_flipper-->
  <link name="rear_right_flipper_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.168 0 0"/>
      <mass value="2.5"/>
      <inertia ixx="0.0025" ixy="0" ixz="0" iyy="0.022" iyz="0" izz="0.02"/>
    </inertial>
    <visual name="rear_right_flipper_visual">
      <origin rpy="0 0 0" xyz="0 0.016 0"/>
      <geometry>
        <mesh filename="model://NuBot_Pumbaa_v2/meshes/back_right_fin_link.STL"/>
      </geometry>
    </visual>
    <collision name="rear_right_flipper_collision_large_wheel_collision">
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.038" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="rear_right_flipper_collision_small_wheel_collision">
      <origin rpy="1.57079632679 0 0" xyz="-0.336 0 0"/>
      <geometry>
        <cylinder length="0.038" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="rear_right_flipper_collision_middle_bar_collision">
      <origin rpy="0 0 3.14159265359" xyz="-0.168 0 0"/>
      <geometry>
        <box size="0.336 0.038 0.18"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="rear_right_flipper_link">
    <selfCollide>false</selfCollide>
    <mu1>0.7</mu1>
    <mu2>150</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
    <fdir1 value="0 1 0"/>
    <gravity>1</gravity>
    <maxContacts>2</maxContacts>
  </gazebo>
  <joint name="rear_right_flipper_joint" type="revolute">
    <origin rpy="0 0 0" xyz="-0.276 -0.266 0"/>
    <child link="rear_right_flipper_link"/>
    <parent link="chassis_link"/>
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-3" upper="3" velocity="0.3"/>
  </joint>
  <!--front_left_flipper-->
  <link name="front_left_flipper_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.168 0 0"/>
      <mass value="2.5"/>
      <inertia ixx="0.0025" ixy="0" ixz="0" iyy="0.022" iyz="0" izz="0.02"/>
    </inertial>
    <visual name="front_left_flipper_visual">
      <origin rpy="0 0 0" xyz="0 -0.016 0"/>
      <geometry>
        <mesh filename="model://NuBot_Pumbaa_v2/meshes/front_left_fin_link.STL"/>
      </geometry>
    </visual>
    <collision name="front_left_flipper_collision_large_wheel_collision">
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.038" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="front_left_flipper_collision_small_wheel_collision">
      <origin rpy="1.57079632679 0 0" xyz="0.336 0 0"/>
      <geometry>
        <cylinder length="0.038" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="front_left_flipper_collision_middle_bar_collision">
      <origin rpy="0 0 0" xyz="0.168 0 0"/>
      <geometry>
        <box size="0.336 0.038 0.18"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="front_left_flipper_link">
    <selfCollide>false</selfCollide>
    <mu1>0.7</mu1>
    <mu2>150</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
    <fdir1 value="0 1 0"/>
    <gravity>1</gravity>
    <maxContacts>2</maxContacts>
  </gazebo>
  <joint name="front_left_flipper_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.276 0.266 0"/>
    <child link="front_left_flipper_link"/>
    <parent link="chassis_link"/>
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-3" upper="3" velocity="0.3"/>
  </joint>
  <!--front_right_flipper-->
  <link name="front_right_flipper_link">
    <inertial>
      <origin rpy="0 0 0" xyz="0.168 0 0"/>
      <mass value="2.5"/>
      <inertia ixx="0.0025" ixy="0" ixz="0" iyy="0.022" iyz="0" izz="0.02"/>
    </inertial>
    <visual name="front_right_flipper_link_visual">
      <origin rpy="0 0 0" xyz="0 0.016 0"/>
      <geometry>
        <mesh filename="model://NuBot_Pumbaa_v2/meshes/front_right_fin_link.STL"/>
      </geometry>
    </visual>
    <collision name="front_right_flipper_collision_large_wheel_collision">
      <origin rpy="1.57079632679 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.038" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="front_right_flipper_collision_small_wheel_collision">
      <origin rpy="1.57079632679 0 0" xyz="0.336 0 0"/>
      <geometry>
        <cylinder length="0.038" radius="0.09"/>
      </geometry>
    </collision>
    <collision name="front_right_flipper_collision_middle_bar_collision">
      <origin rpy="0 0 3.14159265359" xyz="0.168 0 0"/>
      <geometry>
        <box size="0.336 0.038 0.18"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="front_right_flipper_link">
    <selfCollide>false</selfCollide>
    <mu1>0.7</mu1>
    <mu2>150</mu2>
    <kp value="10000000.0"/>
    <kd value="1.0"/>
    <fdir1 value="0 1 0"/>
    <gravity>1</gravity>
    <maxContacts>2</maxContacts>
  </gazebo>
  <joint name="front_right_flipper_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.276 -0.266 0"/>
    <child link="front_right_flipper_link"/>
    <parent link="chassis_link"/>
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-3" upper="3" velocity="0.3"/>
  </joint>
  <gazebo>
    <plugin filename="libnubot_pumbaa_plugin.so" name="NuBot_Pumbaa_Gazebo_Plugin">
      <!--The link tags of tracks-->
      <body>base_link</body>
      <left_track>left_track_link</left_track>
      <right_track>right_track_link</right_track>
      <left_flipper>front_left_flipper_link</left_flipper>
      <left_flipper>rear_left_flipper_link</left_flipper>
      <right_flipper>front_right_flipper_link</right_flipper>
      <right_flipper>rear_right_flipper_link</right_flipper>
      <!--The flippers joint tag-->
      <front_left_flipper_j>front_left_flipper_joint</front_left_flipper_j>
      <rear_left_flipper_j>rear_left_flipper_joint</rear_left_flipper_j>
      <front_right_flipper_j>front_right_flipper_joint</front_right_flipper_j>
      <rear_right_flipper_j>rear_right_flipper_joint</rear_right_flipper_j>
      <!--The Mu/Mu2 of tracks, which influnce the simulating performance-->
      <track_mu>2</track_mu>
      <track_mu2>0.5</track_mu2>
      <!--The PID parameter of flippers position controll & initial position 1.5708 -->
      <flip_p>1500</flip_p>
      <flip_i>100</flip_i>
      <flip_d>0</flip_d>
      <flip_initial>1.0472</flip_initial>
      <!--The parameters of tracks-->
      <tracksSeparation>0.29</tracksSeparation>
      <steeringEfficiency>0.5</steeringEfficiency>
      <maxLinearSpeed>2.0</maxLinearSpeed>
      <maxAngularSpeed>1.5</maxAngularSpeed>
    </plugin>
  </gazebo>
  <joint name="rs_helios_mount_joint" type="fixed">
    <origin rpy="0 0 3.14159265359" xyz="-0.221 0 0.2545"/>
    <parent link="chassis_link"/>
    <child link="rs_helios"/>
  </joint>
  <link name="rs_helios">
    <!-- <inertial>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <mass value="0.9"/>
        <inertia>
        <inertia ixx="0.0025413" ixy="0" ixz="0"
                  iyy="0.0016941" iyz="0"
                  izz="0.0024448"/>
        </inertia>
      </inertial> -->
    <collision name="collision">
      <origin rpy="0 0 0" xyz="0 0 -0.02"/>
      <geometry>
        <cylinder length="0.11" radius="0.05"/>
      </geometry>
      <max_contacts>10</max_contacts>
    </collision>
    <visual name="visual">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="model://RS_Helios_5515/meshes/RS_Helios_frame.STL"/>
      </geometry>
    </visual>
  </link>
  <!-- Gazebo requires the velodyne_gazebo_plugins package -->
  <gazebo reference="rs_helios">
    <sensor name="rs_helios-RS_Helios_5515" type="gpu_ray">
      <pose>0 0 0 0 0 0</pose>
      <visualize>false</visualize>
      <update_rate>10</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>1800</samples>
            <resolution>1</resolution>
            <min_angle>-3.14159265359</min_angle>
            <max_angle>3.14159265359</max_angle>
          </horizontal>
          <vertical>
            <samples>32</samples>
            <resolution>1</resolution>
            <min_angle>-0.959931088597</min_angle>
            <max_angle> 0.261799387799</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.2</min>
          <max>51.0</max>
          <resolution>0.001</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.0</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_velodyne_gpu_laser.so" name="gazebo_ros_laser_controller">
        <topicName>/lidar_points</topicName>
        <frameName>rs_helios</frameName>
        <organize_cloud>False</organize_cloud>
        <min_range>0.2</min_range>
        <max_range>50.0</max_range>
        <gaussianNoise>0.008</gaussianNoise>
      </plugin>
    </sensor>
  </gazebo>
  <joint name="imu_mount_joint" type="fixed">
    <origin rpy="0 0 3.14159265359" xyz="-0.221 0 0.131"/>
    <parent link="chassis_link"/>
    <child link="imu"/>
  </joint>
  <link name="imu">
    <!-- <inertial>
                <mass value="0.1"/>
            </inertial> -->
    <visual name="visual">
      <origin rpy="0 0 0" xyz="0 0 0.013"/>
      <geometry>
        <box size="0.05 0.04 0.026"/>
      </geometry>
    </visual>
    <collision name="collision">
      <origin rpy="0 0 0" xyz="0 0 0.013"/>
      <geometry>
        <box size="0.05 0.04 0.026"/>
      </geometry>
    </collision>
  </link>
  <!-- <gazebo reference="${name}">
            <gravity>true</gravity>
            <sensor name='imu_sensor' type='imu'>
                <always_on>true</always_on>
                <update_rate>${hz}</update_rate>
                <visualize>true</visualize>
                <pose>0 0 0 0 0 0</pose>
                <plugin filename='libgazebo_ros_imu_sensor.so' name='imu_plugin'>
                    <topicName>${topic}</topicName>
                    <updateRateHZ>${hz}</updateRateHZ>
                    <gaussianNoise>0.0</gaussianNoise>
                    <xyzOffset>0 0 0</xyzOffset>
                    <rpyOffset>0 0 0</rpyOffset>
                    <frameName>${name}</frameName>
                </plugin>
            </sensor>
        </gazebo> -->
  <!-- <gazebo>
            <plugin name="imu_plugin" filename="libgazebo_ros_imu.so">
                <alwaysOn>true</alwaysOn>
                <bodyName>${name}</bodyName>
                <topicName>${topic}</topicName>
                <serviceName>${topic}_service</serviceName>
                <gaussianNoise>0.0</gaussianNoise>
                <updateRate>400.0</updateRate>
            </plugin>
        </gazebo> -->
  <gazebo>
    <plugin filename="libhector_gazebo_ros_imu.so" name="imu_controller">
      <robotNamespace>/</robotNamespace>
      <updateRate>400</updateRate>
      <bodyName>imu</bodyName>
      <topicName>/imu/data</topicName>
      <accelDrift>0.005 0.005 0.005</accelDrift>
      <accelGaussianNoise>0.005 0.005 0.005</accelGaussianNoise>
      <rateDrift>0.005 0.005 0.005 </rateDrift>
      <rateGaussianNoise>0.005 0.005 0.005 </rateGaussianNoise>
      <headingDrift>0.005</headingDrift>
      <headingGaussianNoise>0.005</headingGaussianNoise>
    </plugin>
  </gazebo>
</robot>

